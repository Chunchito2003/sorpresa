<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Una sorpresa para ti</title>
    <meta name="description" content="Tarjeta rom√°ntica con animaciones - Abre desde el celular" />
    <style>
        /* [Tus estilos CSS aqu√≠, no necesitan cambios] */
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
          display:flex;align-items:center;justify-content:center;
          background: radial-gradient(circle at 10% 10%, #3b82f6 0%, transparent 25%),
                      linear-gradient(180deg,#0f172a 0%, #0b1220 100%);
          color:#fff;overflow:hidden;padding:20px
        }

        /* Contenedor principal */
        .card{
          width:100%;max-width:720px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
          border-radius:20px;padding:28px;box-shadow:0 8px 40px rgba(2,6,23,0.6);backdrop-filter: blur(6px);
          position:relative;overflow:hidden
        }

        h1{font-size:clamp(22px,5vw,40px);letter-spacing:0.6px;margin-bottom:12px}
        p.lead{font-size:clamp(14px,3.5vw,18px);opacity:0.95}

        /* M√°quina de escribir */
        .typewriter{display:inline-block;white-space:pre-wrap;max-width:100%}
        .cursor{display:inline-block;width:2px;height:1em;background:#fff;margin-left:4px;vertical-align:bottom;animation:blink .9s steps(1) infinite}
        @keyframes blink{50%{opacity:0}}

        /* Botones */
        .controls{margin-top:18px;display:flex;gap:10px;flex-wrap:wrap}
        .btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:12px;color:#fff;font-weight:600;text-decoration:none}
        .btn:active{transform:translateY(1px)}

        /* Corazones ascendentes */
        .heart{position:absolute;left:50%;transform:translateX(-50%);bottom:-60px;pointer-events:none}
        .heart svg{width:34px;height:34px;filter:drop-shadow(0 6px 14px rgba(0,0,0,0.35))}

        @keyframes floatUp{
          0%{transform:translate(-50%,0) scale(0.8);opacity:1}
          100%{transform:translate(-50%,-140vh) scale(1.1);opacity:0}
        }

        /* peque√±o responsive */
        .meta{opacity:0.9;font-size:13px;margin-top:12px}

        /* pantalla completa para el mensaje final */
        .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.5), rgba(2,6,23,0.9));backdrop-filter: blur(4px);z-index:40;opacity:0;pointer-events:none;transition:all .5s}
        .overlay.show{opacity:1;pointer-events:auto}
        .overlay .content{max-width:780px;padding:28px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));text-align:center}
        .big-heart{font-size:80px;margin-bottom:8px}

        /* adaptaciones m√≥viles */
        @media (max-width:420px){
          .card{padding:18px;border-radius:14px}
          .btn{padding:8px 12px;border-radius:10px}
          .big-heart{font-size:54px}
        }
    </style>
</head>
<body>
    <div class="card" role="main">
        <h1>Para ti ‚ù§Ô∏è</h1>
        <p class="lead">Toca el bot√≥n para empezar la sorpresa</p>

        <div style="margin-top:16px">
            <div id="mensaje" class="typewriter"></div><span id="cursor" class="cursor" aria-hidden="true"></span>
        </div>

        <div class="controls">
            <button id="startBtn" class="btn">Empezar sorpresa</button>
            <a id="replay" class="btn" style="display:none">Repetir</a>
        </div>
    </div>

    <div id="hearts" aria-hidden="true"></div>

    <div id="overlay" class="overlay" role="dialog" aria-modal="true">
        <div class="content">
            <div class="big-heart">üíñ</div>
            <h2>Y por ultimo</h2>
            <p style="margin-top:10px;opacity:0.95">Si te gusto, espero tu respuesta</p>
            <div style="margin-top:18px"><button id="closeOverlay" class="btn">Cerrar</button></div>
        </div>
    </div>

<audio id="musica">
    <source src="https://assets.mixkit.co/music/download/mixkit-just-relax-734.mp3" type="audio/mpeg">
    <source src="https://assets.mixkit.co/music/download/mixkit-just-relax-734.ogg" type="audio/ogg">
    Tu navegador no soporta el elemento de audio.
</audio>

<script>
    // Texto que se mostrar√° (puedes editarlo aqu√≠ o reemplazarlo en el archivo)
    const texto = `Hola üñêÔ∏è\nNo sabia que hacer para empezar a hablar con vos, asi que decidi que hacer una mini-web era mejor idea que mandar un simple ‚Äúhola‚Äù.\nSolo quer√≠a decirte que hay algo en vos que me encanta.üôÉ\nSi esto te sac√≥ una sonrisa, misi√≥n cumplida.‚ù§Ô∏è`;

    const mensajeEl = document.getElementById('mensaje');
    const cursor = document.getElementById('cursor');
    const startBtn = document.getElementById('startBtn');
    const musica = document.getElementById('musica');
    const hearts = document.getElementById('hearts');
    const overlay = document.getElementById('overlay');
    const closeOverlay = document.getElementById('closeOverlay');
    const replay = document.getElementById('replay');

    let typingSpeed = 50; // ms por caracter

    function typeText(text, el, cb){
      el.textContent = '';
      let i = 0;
      function next(){
        if(i < text.length){
          const ch = text.charAt(i);
          el.textContent += ch;
          i++;
          setTimeout(next, typingSpeed);
        } else {
          cb && cb();
        }
      }
      next();
    }

    function spawnHeart(){
      const div = document.createElement('div');
      div.className = 'heart';
      const size = 18 + Math.random()*36; // px
      const left = Math.random()*100; // porcentaje
      div.style.left = left + '%';

      // coraz√≥n SVG con color aleatorio suave
      const colors = ['#ff6b6b','#ff8fab','#ffb4c1','#ff758f','#ff4d6d'];
      const color = colors[Math.floor(Math.random()*colors.length)];
      div.innerHTML = `<svg viewBox="0 0 32 29.6" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="${color}" d="M23.6 0c-2.9 0-5.4 1.6-6.6 4-1.2-2.4-3.7-4-6.6-4C2.8 0 0 3 0 6.6 0 14.1 16 23.6 16 23.6s16-9.5 16-17C32 3 29.2 0 23.6 0z"/></svg>`;
      div.style.width = size + 'px';
      div.style.height = size + 'px';
      div.style.opacity = Math.random() * 0.6 + 0.4;
      div.style.bottom = '-60px';
      div.style.position = 'absolute';
      div.style.pointerEvents = 'none';
      div.style.transform = 'translateX(-50%)';
      div.style.animation = `floatUp ${6 + Math.random()*5}s linear forwards`;
      hearts.appendChild(div);

      // limpiar despu√©s
      setTimeout(()=>{
        if(div.parentNode) div.parentNode.removeChild(div);
      }, 12000);
    }

    function startSequence(){
      startBtn.disabled = true;
      
      // *** La l√≠nea clave que intenta reproducir la m√∫sica al interactuar ***
      musica.play().catch(e=>{});

      // generar corazones en intervalo
      const heartInterval = setInterval(spawnHeart, 600);
      // escribir el texto
      typeText(texto, mensajeEl, ()=>{
        // mostrar overlay despu√©s de un ratito
        setTimeout(()=>{
          overlay.classList.add('show');
          clearInterval(heartInterval);
          replay.style.display = 'inline-block';
        }, 900);
      });
    }

    startBtn.addEventListener('click', ()=>{
      startSequence();
    });

    replay.addEventListener('click', ()=>{
      overlay.classList.remove('show');
      mensajeEl.textContent = '';
      startBtn.disabled = false;
      replay.style.display = 'none';
      // Limpia el audio
      musica.pause();
      musica.currentTime = 0; 
      // limpiar corazones existentes
      hearts.innerHTML = '';
    });

    closeOverlay.addEventListener('click', ()=>{
      overlay.classList.remove('show');
    });

    // accesibilidad: permitir empezar con Enter si el bot√≥n est√° enfocado
    startBtn.addEventListener('keyup',(e)=>{if(e.key==='Enter') startBtn.click()});

    // animaci√≥n autom√°tica suave del cursor
    (function pulseCursor(){ cursor.style.opacity=1; setInterval(()=>{cursor.style.opacity=(cursor.style.opacity==1?0:1)},800); })();

    // para evitar scroll raro en m√≥viles
    document.addEventListener('touchmove', function(e){ /* no hacer nada especial */ }, {passive:true});
</script>
</body>
</html>